{"_id":"0URINkzTnJ9pf9Gy","name":"Damage Roll","type":"script","author":"7cKe5J9HEZ26Q640","img":"icons/skills/wounds/injury-pain-body-orange.webp","scope":"global","command":"let rollData = {\n    attrID: \"94kY8YuVmLvWGFdt\",\n    attKey: \"p_damage_roll\",\n    citemID: null,\n    citemKey: null,\n    ciRoll: false,\n    isFree: false,\n    tableKey: null,\n    useData: null\n};\n\n// This is the ID the macro was dragged from\n// For checking Free Table ID's\nlet originalActorId = \"xg2KjatCz1mcFbLc\";\n\nconst speaker = ChatMessage.getSpeaker();\nlet actor;\nif (speaker.token) actor = game.actors.tokens[speaker.token];\nif (!actor) actor = game.actors.get(speaker.actor);\nif (actor) {\n    let letsContinue = true;\n    // Check if actor possess the citem\n    if(rollData.citemKey != null)\n        if(!actor.data.data.citems.find(ci => ci.ciKey === rollData.citemKey))\n            return ui.notifications.warn(\"Current actor does not possess the required citem.\");\n\n    // Check if the free table item still exists\n    if(rollData.isFree)\n        if(!actor.data.data.attributes[rollData.tableKey].tableitems.find(ti => ti.id === rollData.citemID))\n            return ui.notifications.warn(\"Current actor does not possess the referenced Free Table id.\");\n        // Check if the selected actor is the original\n        else if (actor.data._id != originalActorId)\n            await Dialog.confirm({\n                title: \"ARE YOU SURE ABOUT THAT?\",\n                content: \"You are about to roll a Free Table id that isn't from the same actor you created the macro from.<br><br>This may have unintended results due to targetting a different id owned by that actor.\",\n                yes: () => {},\n                no: () => {letsContinue = false;},\n                defaultYes: true\n            });\n\n        if(letsContinue)\n            actor.sheet._onRollCheck(\"94kY8YuVmLvWGFdt\", \"p_damage_roll\", null, null, false, false, null, null);\n    } else\n    ui.notifications.warn(\"Couldn't find actor. Select a token.\");","folder":"rRvq9pB94COfsq2O","sort":100000,"permission":{"default":2,"7cKe5J9HEZ26Q640":3},"flags":{}}
{"_id":"0qEdoT7VJf39Ozip","name":"Difficulty Benchmarks","type":"script","author":"7cKe5J9HEZ26Q640","img":"icons/svg/dice-target.svg","scope":"global","command":"/**\n * Displays dialog for quickly set Sandbox DC\n * @Author: Ramses800\n */\nlet html = `\n<script>\nfunction setDC(difficultylevel)\n{\n  game.settings.set(\"sandbox\", \"diff\",difficultylevel);\n  document.getElementsByName(\"dc\")[0].value=difficultylevel;\n}\n</script>\n<style>\n.btnDC{\n  height:35px;\n  width:100%;\n  border-radius: 3px;\n  background: rgba(0, 0, 0, 0.05);\n  border: 2px groove #c9c7b8;\n  line-height: 28px;\n  margin: 0 5px 0 0;\n}\n.btnDC:hover {\n  box-shadow: 0 0 5px red;\n}\n\n.DCrow {\n  display: flex;\n}\n.DCcolumn {\n  flex: 50%;\n}\n</style>\n<p>Set Difficulty Level(DC)</p>\n<form>\n<div class=\"DCrow\">\n<div class=\"DCcolumn\">\n<input class=\"btnDC\" type=\"button\" onclick=\"setDC('0')\" value=\"Trivial\">\n<input class=\"btnDC\" type=\"button\" onclick=\"setDC('10')\" value=\"Routine\">\n<input class=\"btnDC\" type=\"button\" onclick=\"setDC('16')\" value=\"Difficult\">\n<input class=\"btnDC\" type=\"button\" onclick=\"setDC('25')\" value=\"Strenuous\">\n<input class=\"btnDC\" type=\"button\" onclick=\"setDC('33')\" value=\"Herculean\">\n<input class=\"btnDC\" type=\"button\" onclick=\"setDC('40')\" value=\"Impossible\">\n<input class=\"btnDC\" type=\"button\" onclick=\"setDC('45')\" value=\"Mythical\">\n</div>\n<div class=\"DCcolumn\">\n<input class=\"btnDC\" type=\"button\" onclick=\"setDC('7')\" value=\"Easy\">\n<input class=\"btnDC\" type=\"button\" onclick=\"setDC('13')\" value=\"Challenging\">\n<input class=\"btnDC\" type=\"button\" onclick=\"setDC('21')\" value=\"Demanding\">\n<input class=\"btnDC\" type=\"button\" onclick=\"setDC('29')\" value=\"Severe\">\n<input class=\"btnDC\" type=\"button\" onclick=\"setDC('37')\" value=\"Superhuman\">\n<input class=\"btnDC\" type=\"button\" onclick=\"setDC('42')\" value=\"Legendary\">\n</div>\n</div>\n</form>\n<p>\n`;\n\n\nlet d = new Dialog({\n title: \"Set Difficulty Level(DC)\",\n content: html,\n buttons: {\n  btnClose: {\n   label: \"Close\",\n   callback: () => console.log(\"Close\")\n  }\n },\n default: \"btnClose\"\n});\nd.options.width = 300;\nd.position.width = 300;\nd.render(true);","folder":"rRvq9pB94COfsq2O","sort":200000,"permission":{"default":0,"7cKe5J9HEZ26Q640":3},"flags":{}}
